<app-navbar></app-navbar>

<div class="bienvenida-container">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <div class="welcome-header">
        <h1 class="hero-title">Â¡Bienvenido, {{ currentUser?.name }}!</h1>
        <p class="hero-subtitle">
          <span *ngIf="currentUser?.rol === 'admin'" class="admin-badge">
            <i class="icon-crown">ğŸ‘‘</i> Panel de Administrador
          </span>
          <span *ngIf="currentUser?.rol === 'cinefilo'" class="user-badge">
            <i class="icon-movie">ğŸ¬</i> Tu espacio cinÃ©filo personal
          </span>
        </p>
      </div>
      
      <div class="hero-stats" *ngIf="!isAdmin()">
        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-info">
            <span class="stat-number">{{ misResenas.length }}</span>
            <span class="stat-label">ReseÃ±as</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">â­</div>
          <div class="stat-info">
            <span class="stat-number">{{ promedioCalificacion }}</span>
            <span class="stat-label">Promedio</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ†</div>
          <div class="stat-info">
            <span class="stat-number">{{ resenasBuenas.length }}</span>
            <span class="stat-label">Destacadas</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div *ngIf="loading" class="loading-section">
    <div class="loading-spinner"></div>
    <p class="loading-text">Cargando tu informaciÃ³n...</p>
  </div>

  <div *ngIf="!loading" class="main-content">
    <!-- Quick Actions Section -->
    <section class="quick-actions-section">
      <h2 class="section-title">Acciones RÃ¡pidas</h2>
      <div class="actions-grid">
        <button (click)="navigateTo('/peliculas')" class="action-card primary">
          <div class="action-icon">ğŸ¬</div>
          <div class="action-content">
            <h3>Explorar PelÃ­culas</h3>
            <p>Descubre nuevas pelÃ­culas y comparte tu opiniÃ³n</p>
          </div>
          <div class="action-arrow">â†’</div>
        </button>
        
        <button *ngIf="!isAdmin()" (click)="navigateTo('/mis-resenas')" class="action-card secondary">
          <div class="action-icon">ğŸ“</div>
          <div class="action-content">
            <h3>Mis ReseÃ±as</h3>
            <p>Revisa y edita tus reseÃ±as anteriores</p>
          </div>
          <div class="action-arrow">â†’</div>
        </button>
        
        <div *ngIf="isAdmin()">
          <button (click)="navigateTo('/admin/usuarios')" class="action-card admin">
            <div class="action-icon">âš™ï¸</div>
            <div class="action-content">
              <h3>Panel Admin</h3>
              <p>Gestionar usuarios, pelÃ­culas y reseÃ±as</p>
            </div>
            <div class="action-arrow">â†’</div>
          </button>
        </div>
      </div>
    </section>

    <!-- Featured Reviews Section -->
    <section class="featured-section" *ngIf="!isAdmin()">
      <h2 class="section-title">Tus ReseÃ±as Destacadas</h2>
      
      <div *ngIf="resenasBuenas.length === 0" class="empty-state">
        <div class="empty-icon">â­</div>
        <h3>No tienes reseÃ±as destacadas aÃºn</h3>
        <p>Escribe tu primera reseÃ±a con una calificaciÃ³n alta para verla aquÃ­</p>
        <button (click)="navigateTo('/peliculas')" class="btn-primary">
          <span class="btn-icon">ğŸ¬</span>
          Explorar PelÃ­culas
        </button>
      </div>
      
      <div *ngIf="resenasBuenas.length > 0" class="reviews-grid">
        <div *ngFor="let resena of resenasBuenas.slice(0, 3)" class="review-card">
          <div class="review-header">
            <h4 class="movie-title">{{ resena.pelicula?.titulo }}</h4>
            <div class="rating-stars">{{ getEstrellas(resena.calificacion) }}</div>
          </div>
          <p class="review-text">{{ resena.resena }}</p>
          <div class="review-footer">
            <span class="review-date">{{ resena.created_at | date:'dd/MM/yyyy' }}</span>
            <span class="rating-badge">{{ resena.calificacion }}/5</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Information Panel -->
    <section class="info-section">
      <div class="info-grid">
        <div class="info-card">
          <div class="info-header">
            <div class="info-icon">ï¿½</div>
            <h3>Sistema de ReseÃ±as</h3>
          </div>
          <p>Califica pelÃ­culas del 1 al 5 estrellas y comparte tu opiniÃ³n con la comunidad cinÃ©fila.</p>
        </div>
        
        <div class="info-card">
          <div class="info-header">
            <div class="info-icon">â­</div>
            <h3>GuÃ­a de Calificaciones</h3>
          </div>
          <div class="rating-guide">
            <div class="rating-item">
              <span class="stars">â­</span>
              <span class="description">Terrible</span>
            </div>
            <div class="rating-item">
              <span class="stars">â­â­</span>
              <span class="description">Malo</span>
            </div>
            <div class="rating-item">
              <span class="stars">â­â­â­</span>
              <span class="description">Regular</span>
            </div>
            <div class="rating-item">
              <span class="stars">â­â­â­â­</span>
              <span class="description">Bueno</span>
            </div>
            <div class="rating-item">
              <span class="stars">â­â­â­â­â­</span>
              <span class="description">Excelente</span>
            </div>
          </div>
        </div>

        <div *ngIf="currentUser?.rol === 'admin'" class="info-card admin-card">
          <div class="info-header">
            <div class="info-icon">ğŸ‘‘</div>
            <h3>Privilegios de Administrador</h3>
          </div>
          <ul class="admin-privileges">
            <li>âœ“ Gestionar usuarios del sistema</li>
            <li>âœ“ Administrar catÃ¡logo de pelÃ­culas</li>
            <li>âœ“ Moderar reseÃ±as y contenido</li>
            <li>âœ“ Acceso a estadÃ­sticas completas</li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</div>
